# 🔧 路径问题修复指南

## 问题说明
您遇到的错误是因为API服务无法找到 `Definitions` 和 `Overrides` 文件夹，这些文件夹包含了游戏技能定义和名称覆盖数据。

## ✅ 快速解决方案

### 方案1：自动修复（推荐）
```bash
# 重新运行修复后的启动脚本
start.bat
```

修复后的启动脚本会自动：
- 检查并创建缺失的目录
- 复制示例配置文件
- 确保所有路径正确

### 方案2：手动修复
```bash
# 1. 确保在正确的目录结构下
FFXIV_ACT_Plugin/
├── Definitions/     ← 这个文件夹需要存在
├── Overrides/       ← 这个文件夹需要存在
└── api_design/
    ├── main.py
    └── 其他API文件...

# 2. 如果文件夹不存在，手动创建
mkdir "..\Definitions"
mkdir "..\Overrides"

# 3. 复制示例文件
copy "Definitions\BlackMage_sample.json" "..\Definitions\BlackMage.json"
copy "Overrides\sample_overrides.txt" "..\Overrides\global_sample.txt"
```

### 方案3：使用现有数据
如果您已经有完整的 Definitions 和 Overrides 文件夹：

```bash
# 确保文件夹在正确位置
FFXIV_ACT_Plugin/
├── Definitions/          ← 包含所有职业JSON文件
│   ├── BlackMage.json
│   ├── WhiteMage.json
│   └── ...
├── Overrides/           ← 包含名称覆盖文件
│   ├── global_P10S.txt
│   └── ...
└── api_design/
    └── main.py
```

## 🧪 验证修复

1. **重新启动服务**
```bash
python main.py
```

2. **检查启动日志**
正常情况下应该看到：
```
INFO:     Uvicorn running on http://0.0.0.0:8000
INFO:     FFXIV Combat Parser 初始化成功
INFO:     加载了 X 个职业定义
INFO:     加载了 Y 个技能定义
```

3. **测试API功能**
```bash
# 运行测试脚本
python test_api.py

# 或者访问API文档
# http://localhost:8000/docs
```

## 📊 预期结果

修复后，您应该看到类似这样的启动日志：
```
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started server process [12345]
INFO:     Waiting for application startup.
INFO:     加载了 1 个职业定义
INFO:     加载了 6 个技能定义
INFO:     加载了 2 个状态效果定义
INFO:     加载了 2 个名称覆盖
INFO:     FFXIV Combat Parser 初始化成功
INFO:     Application startup complete.
```

## 🚨 如果仍有问题

1. **检查文件路径**
```python
import os
print("当前工作目录:", os.getcwd())
print("API目录:", os.path.dirname(os.path.abspath(__file__)))
```

2. **手动指定路径**
修改 `main.py` 中的路径：
```python
definitions_path = r"e:\code\myact\FFXIV_ACT_Plugin\Definitions"
overrides_path = r"e:\code\myact\FFXIV_ACT_Plugin\Overrides"
```

3. **使用绝对路径**
如果相对路径仍有问题，可以使用绝对路径。

## 💡 小贴士

- 确保在 `api_design` 文件夹内运行脚本
- 如果使用IDE，确保工作目录设置正确
- Windows用户注意路径分隔符使用反斜杠 `\`

修复完成后，您就可以正常使用API的所有功能了！🎉